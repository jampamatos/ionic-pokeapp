// File: src/app/pages/pokedex-list/pokedex-list.page.scss

// Import design tokens
@import '../../../theme/variables.scss';

ion-content {
  --background: #455a64; // background color for the page
  display: block !important;
}

// Container for the Pokédex device frame
.pokedex-device {
  background: linear-gradient(
    135deg,
    $pokedex-red 0%,
    darken($pokedex-red, 10%) 70%,
    darken($pokedex-red, 20%) 100%
  );
  border: 4px solid darken($pokedex-red, 25%);
  border-radius: 1.5rem;
  box-shadow:
    inset 0 4px 10px rgba(0, 0, 0, 0.35),
    0 16px 32px rgba(0, 0, 0, 0.6);
  padding: $spacing-xl $spacing-lg;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  width: clamp(360px, 50vw, 600px);
  height: calc(100vh - 2 * #{$spacing-md});
  margin: $spacing-md auto;
}

// Search bar spans full width
.pokedex-device ion-searchbar {
  width: 100%;
  margin-bottom: $spacing-md;
}

// Center the loading spinner
.pokedex-device ion-spinner {
  margin: $spacing-md auto;
}

// Make the grid fill available area
.pokedex-device ion-grid {
  width: 100%;
  flex: 1; // grow if needed
}

// === Screen frame externo ===
.pokedex-screen {
  background-color: $gray-900; // tela frame escura
  border: 2px solid darken($gray-900, 10%);
  border-radius: $radius-md; // cantos arredondados
  padding: 1px; // espaço interno fino
  flex: 1;
  width: 100%;
  margin-bottom: $spacing-md; // distância até controles
  position: relative;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5);
}

// === Screen interno com CRT overlay ===
.pokedex-screen-inner {
  background-color: #000; // fundo preto puro
  border: 2px solid $gray-800; // borda interna
  border-radius: $radius-sm; // cantos levemente arredondados
  padding: $spacing-md; // espaço para o conteúdo
  display: flex;
  flex-direction: column;
  flex: 1;
  width: 100%;
  height: 100%;
  overflow: hidden; // esconde excesso
  position: relative;
  font-family: Monaco, 'Lucida Console', monospace; // fonte retrô
  font-size: 12px; // tamanho de terminal

  // customiza o ion-searchbar interno
  ion-searchbar {
    width: 100%;
    --background: #000;
    --border-radius: $radius-sm;
    --color: $green-400;
    --icon-color: $green-600;
    --placeholder-color: rgba($green-600, 0.6);
    --padding-start: $searchbar-padding-inline; // espaço para o ícone
  }

  // contêiner da input para borda custom
  ion-searchbar .searchbar-input-container {
    position: relative;
    border: 2px solid $green-600;
    border-radius: $radius-sm;
    background: transparent;
    box-shadow: inset 0 1px 2px rgba(0, 255, 0, 0.1);
    background: #000;
    box-shadow: inset 0 0 4px rgba($green-400, 0.2);

    &::after {
      content: '';
      position: absolute;
      inset: 0;
      border: 1px solid rgba($green-400, 0.2);
      border-radius: inherit;
      pointer-events: none;
    }
  }

  // input em si: fonte monoespaçada e uppercase
  ion-searchbar .searchbar-input {
    font-family: Monaco, 'Lucida Console', monospace;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition:
      box-shadow 0.2s ease,
      border-color 0.2s ease;

    &:focus {
      outline: none;
      box-shadow: 0 0 0 2px $green-400;
      border-color: $green-400;
    }
  }

  // posiciona o ícone de lupa
  ion-searchbar .searchbar-search-icon {
    left: 0.75rem;
  }

  // efeito de linhas de CRT
  &::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0, 255, 0, 0.1) 2px,
      rgba(0, 255, 0, 0.1) 4px
    );
    opacity: 0.3;
    pointer-events: none;
  }

  & > ion-searchbar,
  & > ion-spinner {
    flex-shrink: 0;
  }

  & > ion-grid {
    flex: 1;
    overflow: auto;
  }
}

// === Indicadores superiores ===
.pokedex-indicators {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  margin-bottom: $spacing-md;
}

.indicator-power {
  width: 4rem;
  height: 4rem;
  background: linear-gradient(135deg, #67e8f9, #2563eb);
  border: 4px solid #fff;
  border-radius: 50%;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
  position: relative;
  &::before {
    content: '';
    position: absolute;
    inset: 0.5rem;
    background: linear-gradient(45deg, #2563eb, #67e8f9);
    border-radius: 50%;
  }
}

.indicator-lights {
  display: flex;
  gap: $spacing-xxs;
}

.light {
  width: 0.75rem;
  height: 0.75rem;
  border: 2px solid;
  border-radius: 50%;
  &.yellow {
    background-color: $pokedex-yellow;
    border-color: darken($pokedex-yellow, 20%);
  }
  &.red {
    background-color: $pokedex-red;
    border-color: darken($pokedex-red, 20%);
  }
  &.green {
    background-color: #22c55e;
    border-color: darken(#22c55e, 20%);
  }
}

// === Painel de controles inferiores ===
.pokedex-controls {
  display: flex;
  justify-content: space-between;
  width: 100%;
  margin-top: $spacing-lg;
}

.controls-left,
.controls-center,
.controls-right {
  display: flex;
  align-items: center;
}

.controls-left {
  flex-direction: column;
  gap: $spacing-xs;
}

.btn-red {
  width: 3rem;
  height: 3rem;
  background: linear-gradient(to bottom, lighten($pokedex-red, 20%), darken($pokedex-red, 20%));
  border: 4px solid darken($pokedex-red, 20%);
  border-radius: 50%;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
}

.speaker {
  display: flex;
  flex-direction: column;
  gap: $spacing-xxs;
}

.speaker-hole {
  width: 0.5rem;
  height: 0.25rem;
  background-color: darken($pokedex-red, 30%);
  border-radius: $radius-sm;
}

.controls-center {
  flex: 1;
  justify-content: center;
}

.btn-green {
  padding: $spacing-xs $spacing-md;
  background: linear-gradient(to bottom, #4ade80, #16a34a);
  border: 4px solid darken(#4ade80, 20%);
  border-radius: $radius-sm;
  font-size: 10px;
  font-weight: bold;
  text-transform: uppercase;
}

.controls-right {
  justify-content: flex-end;
}

.screen-header {
  text-align: center;
  margin-bottom: $spacing-md;
}

.screen-title {
  color: $green-400;
  font-family: Monaco, 'Lucida Console', monospace;
  font-size: 14px;
  font-weight: bold;
  letter-spacing: 1px;
  margin-bottom: $spacing-xxs;
}

.screen-subtitle {
  color: rgba($green-400, 0.7);
  font-family: Monaco, 'Lucida Console', monospace;
  font-size: 10px;
  letter-spacing: 1px;
}

.screen-separator {
  width: 60%;
  height: 1px;
  background-color: $green-400;
  margin: $spacing-xxs auto $spacing-sm;
}

.pokedex-screen-inner > ion-searchbar {
  margin-bottom: $spacing-md !important;
}

.screen-header + ion-searchbar {
  width: calc(100% - #{$spacing-lg} * 2);
  height: $searchbar-height;
  margin: $spacing-xs auto $spacing-md;

  --icon-color: $green-400;
  --placeholder-color: $green-400;
  --padding-start: $searchbar-padding-inline;

  --box-shadow: none;
  padding: 0;
  border: $searchbar-border-width solid $searchbar-border-color;
  border-radius: $radius-sm;
}

.screen-header + ion-searchbar {
  border: $searchbar-border-width solid $searchbar-border-color;
  border-radius: $radius-sm;
  --background: transparent;
  --box-shadow: none;
}

.screen-header + ion-searchbar::part(input) {
  color: $green-400;
  font-family: Monaco, 'Lucida Console', monospace;
  text-transform: uppercase;
  letter-spacing: 1px;
  padding-inline-start: $searchbar-padding-inline;
}

.screen-header + ion-searchbar::part(search-icon),
.screen-header + ion-searchbar::part(clear-icon) {
  color: $green-400;
}

.screen-header + ion-searchbar::part(input)::placeholder {
  color: $green-400;
  opacity: 1;
  text-transform: uppercase;
  letter-spacing: 1px;
  font-family: Monaco, 'Lucida Console', monospace;
}
